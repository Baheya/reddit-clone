_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[12],{"/EDR":function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n("QeBL")}])},"4Tsm":function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var a=n("ODXe"),r=n("BMxC"),o=n("OQ2h"),i=n("pboS"),l=n("q1tI"),c=n.n(l),u=n("YFqc"),s=n.n(u),d=n("pHx+"),f=c.a.createElement,p=function(e){var t,n=e.id,l=e.authorId,c=Object(d.d)(),u=Object(a.a)(c,2)[1],p=Object(d.h)(),v=Object(a.a)(p,1)[0].data;return(null===v||void 0===v?void 0:null===(t=v.me)||void 0===t?void 0:t.id)!==l?null:f(r.a,null,f(s.a,{href:"/post/edit/[id]",as:"/post/edit/".concat(n)},f(o.a,{as:i.a,ml:"auto",mr:4,icon:"edit","aria-label":"Edit Post"})),f(o.a,{ml:"auto",icon:"delete","aria-label":"Delete Post",onClick:function(){u({id:n})}}))}},OQ2h:function(e,t,n){"use strict";var a=n("pVnL"),r=n.n(a),o=n("8OQS"),i=n.n(o),l=n("qKvR"),c=n("q1tI"),u=n("w0db"),s=n("eJLp"),d=n("BMxC"),f=Object(c.forwardRef)((function(e,t){var n=e.icon,a=e.isRound,o=e["aria-label"],c=i()(e,["icon","isRound","aria-label"]),f=(c.isFullWidth,c.leftIcon,c.rightIcon,c.loadingText,i()(c,["isFullWidth","leftIcon","rightIcon","loadingText"]));return Object(l.d)(s.a,r()({p:"0",borderRadius:a?"full":"md",ref:t,"aria-label":o},f),"string"===typeof n?Object(l.d)(u.a,{name:n,focusable:"false",color:"currentColor","aria-hidden":!0}):Object(l.d)(d.a,{as:n,"aria-hidden":!0,focusable:"false",color:"currentColor"}))}));f.displayName="IconButton",f.defaultProps=s.a.defaultProps,t.a=f},QeBL:function(e,t,n){"use strict";n.r(t);var a=n("ODXe"),r=n("q1tI"),o=n.n(r),i=n("pVnL"),l=n.n(i),c=n("8OQS"),u=n.n(c),s=n("qKvR"),d=n("Weur"),f=n("BMxC"),p=function(e){var t,n=e.direction,a=e.isInline,o=void 0!==a&&a,i=e.isReversed,c=void 0!==i&&i,p=e.children,v=e.align,h=e.justify,b=e.spacing,m=void 0===b?2:b,g=e.shouldWrapChildren,x=u()(e,["direction","isInline","isReversed","children","align","justify","spacing","shouldWrapChildren"]),O=c||n&&n.endsWith("reverse"),w=o||n&&n.startsWith("row");w&&(t="row"),O&&(t=o?"row-reverse":"column-reverse"),n&&(t=n),w||O||n||(t="column");var y=r.Children.toArray(p).filter(r.isValidElement);return Object(s.d)(d.a,l()({align:v,justify:h,direction:t},x),y.map((function(e,t){var n,a,o=y.length===t+1,i=w?((n={})[O?"ml":"mr"]=o?null:m,n):((a={})[O?"mt":"mb"]=o?null:m,a);return g?Object(s.d)(f.a,l()({d:"inline-block"},i,{key:"stack-box-wrapper-"+t}),e):Object(r.cloneElement)(e,i)})))},v=n("pboS"),h=n("qWyU"),b=n("sK1y"),m=n("eJLp"),g=n("fUhf"),x=n("YFqc"),O=n.n(x),w=n("4Tsm"),y=n("soUV"),j=n("o0o1"),C=n.n(j),E=n("HaE+"),k=n("OQ2h"),L=n("pHx+"),I=o.a.createElement,R=function(e){var t=e.post,n=Object(r.useState)("not-loading"),o=n[0],i=n[1],l=Object(L.m)(),c=Object(a.a)(l,2)[1];return I(d.a,{direction:"column",justifyContent:"center",alignItems:"center",mr:4},I(k.a,{onClick:Object(E.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==t.voteStatus){e.next=2;break}return e.abrupt("return");case 2:return i("upvote-loading"),e.next=5,c({postId:t.id,value:1});case 5:i("not-loading");case 6:case"end":return e.stop()}}),e)}))),variantColor:1===t.voteStatus?"green":void 0,isLoading:"upvote-loading"===o,icon:"chevron-up","aria-label":"upvote post"}),t.votes,I(k.a,{onClick:Object(E.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1!==t.voteStatus){e.next=2;break}return e.abrupt("return");case 2:return i("downvote-loading"),e.next=5,c({postId:t.id,value:-1});case 5:i("not-loading");case 6:case"end":return e.stop()}}),e)}))),variantColor:-1===t.voteStatus?"red":void 0,isLoading:"downvote-loading"===o,icon:"chevron-down","aria-label":"downvote-post"}))},q=n("9LYk"),S=o.a.createElement;t.default=Object(g.a)(q.a,{ssr:!0})((function(){var e=Object(r.useState)({limit:15,cursor:null}),t=e[0],n=e[1],o=Object(L.j)({variables:t}),i=Object(a.a)(o,1)[0],l=i.data,c=i.error,u=i.fetching;return u||l?S(y.a,null,!l&&u?S("div",null,"loading..."):S(p,{spacing:8},l.posts.posts.map((function(e){return e?S(d.a,{key:e.id,p:5,shadow:"md",borderWidth:"1px"},S(R,{post:e}),S(f.a,{flex:1},S(O.a,{href:"/post/[id]",as:"/post/".concat(e.id)},S(v.a,null,S(h.a,{fontSize:"xl"},e.title))),S(b.a,null,"posted by ",e.author.username),S(d.a,{align:"center"},S(b.a,{flex:1,mt:4},e.textSnippet),S(w.a,{authorId:e.author.id,id:e.id})))):null}))),l&&l.posts.hasMore&&S(d.a,null,S(m.a,{onClick:function(){n({limit:t.limit,cursor:l.posts.posts[l.posts.posts.length-1].createdAt})},isLoading:u,m:"auto",my:8},"Load more"))):S("div",null,S("div",null,"no posts"),S("div",null,null===c||void 0===c?void 0:c.message))}))},YFqc:function(e,t,n){e.exports=n("cTJO")},cTJO:function(e,t,n){"use strict";var a=n("zoAU"),r=n("7KCV");t.__esModule=!0,t.default=void 0;var o,i=r(n("q1tI")),l=n("elyg"),c=(n("g/15"),n("nOHt")),u=new Map,s=window.IntersectionObserver,d={};var f=function(e,t){var n=o||(s?o=new s((function(e){e.forEach((function(e){if(u.has(e.target)){var t=u.get(e.target);(e.isIntersecting||e.intersectionRatio>0)&&(o.unobserve(e.target),u.delete(e.target),t())}}))}),{rootMargin:"200px"}):void 0);return n?(n.observe(e),u.set(e,t),function(){try{n.unobserve(e)}catch(t){console.error(t)}u.delete(e)}):function(){}};function p(e,t,n,a){(0,l.isLocalURL)(t)&&(e.prefetch(t,n,a).catch((function(e){0})),d[t+"%"+n]=!0)}var v=function(e){var t=!1!==e.prefetch,n=i.default.useState(),r=a(n,2),o=r[0],u=r[1],v=(0,c.useRouter)(),h=v&&v.pathname||"/",b=i.default.useMemo((function(){var t=(0,l.resolveHref)(h,e.href);return{href:t,as:e.as?(0,l.resolveHref)(h,e.as):t}}),[h,e.href,e.as]),m=b.href,g=b.as;i.default.useEffect((function(){if(t&&s&&o&&o.tagName&&(0,l.isLocalURL)(m)&&!d[m+"%"+g])return f(o,(function(){p(v,m,g)}))}),[t,o,m,g,v]);var x=e.children,O=e.replace,w=e.shallow,y=e.scroll;"string"===typeof x&&(x=i.default.createElement("a",null,x));var j=i.Children.only(x),C={ref:function(e){e&&u(e),j&&"object"===typeof j&&j.ref&&("function"===typeof j.ref?j.ref(e):"object"===typeof j.ref&&(j.ref.current=e))},onClick:function(e){j.props&&"function"===typeof j.props.onClick&&j.props.onClick(e),e.defaultPrevented||function(e,t,n,a,r,o,i){("A"!==e.currentTarget.nodeName||!function(e){var t=e.currentTarget.target;return t&&"_self"!==t||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)&&(0,l.isLocalURL)(n))&&(e.preventDefault(),null==i&&(i=a.indexOf("#")<0),t[r?"replace":"push"](n,a,{shallow:o}).then((function(e){e&&i&&(window.scrollTo(0,0),document.body.focus())})))}(e,v,m,g,O,w,y)}};return t&&(C.onMouseEnter=function(e){(0,l.isLocalURL)(m)&&(j.props&&"function"===typeof j.props.onMouseEnter&&j.props.onMouseEnter(e),p(v,m,g,{priority:!0}))}),!e.passHref&&("a"!==j.type||"href"in j.props)||(C.href=(0,l.addBasePath)(g)),i.default.cloneElement(j,C)};t.default=v},"hGi/":function(e,t,n){"use strict";function a(e){if(null==e)throw new TypeError("Cannot destructure undefined")}n.d(t,"a",(function(){return a}))},pboS:function(e,t,n){"use strict";var a=n("pVnL"),r=n.n(a),o=n("8OQS"),i=n.n(o),l=n("qKvR"),c=n("+Cyc"),u=n("q1tI"),s={transition:"all 0.15s ease-out",cursor:"pointer",textDecoration:"none",outline:"none",_focus:{boxShadow:"outline"},_disabled:{opacity:"0.4",cursor:"not-allowed",textDecoration:"none"}},d=Object(u.forwardRef)((function(e,t){var n=e.isDisabled,a=e.isExternal,o=e.onClick,u=i()(e,["isDisabled","isExternal","onClick"]),d=a?{target:"_blank",rel:"noopener noreferrer"}:null;return Object(l.d)(c.a,r()({as:"a",ref:t,tabIndex:n?-1:void 0,"aria-disabled":n,onClick:n?function(e){return e.preventDefault()}:o,_hover:{textDecoration:"underline"}},d,s,u))}));d.displayName="Link",t.a=d},qWyU:function(e,t,n){"use strict";var a=n("pVnL"),r=n.n(a),o=n("8OQS"),i=n.n(o),l=n("qKvR"),c=n("BMxC"),u=n("q1tI"),s={"2xl":["4xl",null,"5xl"],xl:["3xl",null,"4xl"],lg:["xl",null,"2xl"],md:"xl",sm:"md",xs:"sm"},d=Object(u.forwardRef)((function(e,t){var n=e.size,a=void 0===n?"xl":n,o=i()(e,["size"]);return Object(l.d)(c.a,r()({ref:t,as:"h2",fontSize:s[a],lineHeight:"shorter",fontWeight:"bold",fontFamily:"heading"},o))}));d.displayName="Heading",t.a=d},sK1y:function(e,t,n){"use strict";var a=n("pVnL"),r=n.n(a),o=n("q1tI"),i=n.n(o),l=n("BMxC"),c=i.a.forwardRef((function(e,t){return i.a.createElement(l.a,r()({ref:t,as:"p",fontFamily:"body"},e))}));c.displayName="Text",t.a=c},soUV:function(e,t,n){"use strict";n.d(t,"a",(function(){return C}));var a=n("q1tI"),r=n.n(a),o=n("uHth"),i=n("o0o1"),l=n.n(i),c=n("HaE+"),u=n("ODXe"),s=n("hGi/"),d=n("pboS"),f=n("Weur"),p=n("eJLp"),v=n("BMxC"),h=n("qWyU"),b=n("YFqc"),m=n.n(b),g=n("pHx+"),x=n("OXnp"),O=n("nOHt"),w=r.a.createElement,y=function(e){Object(s.a)(e);var t=Object(O.useRouter)(),n=Object(g.g)(),a=Object(u.a)(n,2),o=a[0].fetching,i=a[1],b=Object(g.h)({pause:Object(x.a)()}),y=Object(u.a)(b,1)[0],j=y.data,C=null;return y.fetching||(C=(null===j||void 0===j?void 0:j.me)?w(f.a,{align:"center"},w(m.a,{href:"/create-post"},w(p.a,{as:d.a,mr:4},"Create Post")),w(v.a,{mr:2},j.me.username),w(p.a,{onClick:Object(c.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i();case 2:t.reload();case 3:case"end":return e.stop()}}),e)}))),isLoading:o,variant:"link"},"logout")):w(r.a.Fragment,null,w(m.a,{href:"/login"},w(d.a,{color:"black",mr:2},"login")),w(m.a,{href:"/register"},w(d.a,{color:"black"},"register")))),w(f.a,{zIndex:1,position:"sticky",top:0,bg:"tan",p:4},w(f.a,{flex:1,maxW:800,m:"auto",align:"center"},w(m.a,{href:"/"},w(d.a,null,w(h.a,null,"Reddit"))),w(v.a,{ml:"auto"},C)))},j=r.a.createElement,C=function(e){var t=e.children,n=e.variant;return j(r.a.Fragment,null,j(y,null),j(o.a,{variant:n},t))}}},[["/EDR",1,2,0,3,4]]]);